(()=>{"use strict";var t={536:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Sound=e.AudioManager=void 0,e.AudioManager=class{constructor(){this.audioPlayers=[],this.isAudioEnabled=!0}CheckAudioEnabled(){return this.isAudioEnabled}ToggleAudioEnabled(t=!this.isAudioEnabled){this.isAudioEnabled=t}CreateSound(t,e=!1){const i=new s(this,t,e);return this.audioPlayers.push(i),i}CleanUp(t){if(t instanceof s){t.Remove();const e=this.audioPlayers.indexOf(t);-1!==e&&this.audioPlayers.splice(e,1)}else console.log("CleanUp Failed: Not an instanceof Sound.")}};class s{constructor(t,e,s=!1){this.audioManager=t;const i={asteroidExplode:{soundFile:"./audio/space-explosion-with-reverb-101449.mp3",volPercent:40},gameOver:{soundFile:"./audio/game-fx-9-40197.mp3",volPercent:50},missionComplete:{soundFile:"./audio/game-level-complete-143022.mp3",volPercent:50},shieldDown:{soundFile:"./audio/one_beep-99630.mp3",volPercent:100},shipExplode:{soundFile:"./audio/heavy-cineamtic-hit-166888.mp3",volPercent:25},shipRespawn:{soundFile:"./audio/robot_01-47250.mp3",volPercent:50},shipThrusters:{soundFile:"./audio/thrusters_loopwav-14699.mp3",volPercent:100},shootBullet:{soundFile:"./audio/shoot02wav-14562.mp3",volPercent:10}};this.sound=new Audio(i[e].soundFile),this.sound.setAttribute("preload","auto"),this.sound.setAttribute("controls","none"),this.sound.style.display="none",document.body.appendChild(this.sound),this.soundVol=i[e].volPercent,this.SetVolume(this.soundVol),this.sound.loop=s}SetVolume(t){if(!(t>=0&&t<=100))return console.error("Invalid volume percentage. Please provide a value between 0 and 100.");this.sound.volume=t/100}Play(){if(this.audioManager.CheckAudioEnabled()){this.SetVolume(this.soundVol);try{this.sound.play()}catch(t){console.error(`Error playing sound: ${t}`)}}}Stop(){this.sound.pause()}Remove(){try{this.sound&&this.sound.addEventListener("ended",(()=>{this.sound&&this.sound.parentNode&&this.sound.parentNode.removeChild(this.sound)}))}catch(t){console.error(`Error removing sound: ${t}`)}}}e.Sound=s},295:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.detectCollisions=void 0;const a=i(s(631)),h=i(s(412)),o=i(s(66)),n=i(s(608));e.detectCollisions=t=>{let e,s;for(let e=0;e<t.length;e++){const s=t[e];s instanceof a.default&&s.SetColliding(!1)}for(let m=t.length-1;m>=0;m--)if(e=t[m],e instanceof a.default)for(let p=t.length-1;p>=0;p--)if(s=t[p],s instanceof a.default&&m!==p&&(i=e.x,r=e.y,l=e.GetCollisionRadius(),d=s.x,c=s.y,u=s.GetCollisionRadius(),(i-d)*(i-d)+(r-c)*(r-c)<=(l+u)*(l+u))){if((e instanceof o.default||s instanceof o.default)&&(e instanceof n.default||s instanceof n.default))return;e.SetColliding(!0),s.SetColliding(!0),(e instanceof o.default||s instanceof o.default)&&(e instanceof h.default||s instanceof h.default)&&(e instanceof h.default&&s instanceof o.default&&(s.Remove(),e.ScoredHit()),s instanceof h.default&&e instanceof o.default&&(e.Remove(),s.ScoredHit()))}var i,r,l,d,c,u}},532:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t){this.canvas=t,this.canvas.width=1200,this.canvas.height=800;const e=t.getContext("2d");if(!(e instanceof CanvasRenderingContext2D))throw new Error("Unable to getContext of canvas.");this.ctx=e}GetCanvas(){return this.canvas}GetCtx(){return this.ctx}ClearScreen(){this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}}},587:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t,e,s,i){this.gameCanvas=t,this.canvasWidth=t.GetCanvas().width,this.canvasHeight=t.GetCanvas().height,this.ctx=this.gameCanvas.GetCtx(),this.gameManager=e,this.x=s,this.y=i}Update(t){}Render(){}}},57:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s(587));class h extends a.default{constructor(t,e,s,i){super(t,e,s,i),this.color="white"}}e.default=h},884:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){this.actions={leftButton:!1,rightButton:!1,forwardButton:!1,fireButton:!1,startButton:!1},this.gameKeys=[13,32,37,38,39,65,68,87],document.body.addEventListener("keydown",(t=>{this.KeyDown(t.keyCode),this.CheckGameKey(t.keyCode)&&t.preventDefault()})),document.body.addEventListener("keyup",(t=>{this.KeyUp(t.keyCode)}))}KeyDown(t){38!==t&&87!=t||(this.actions.forwardButton=!0),37!==t&&65!=t||(this.actions.leftButton=!0),39!==t&&68!=t||(this.actions.rightButton=!0),32===t&&(this.actions.fireButton=!0),13===t&&(this.actions.startButton=!0)}KeyUp(t){38!==t&&87!==t||(this.actions.forwardButton=!1),37!==t&&65!==t||(this.actions.leftButton=!1),39!==t&&68!==t||(this.actions.rightButton=!1),32===t&&(this.actions.fireButton=!1),13===t&&(this.actions.startButton=!1)}GetCurrentActions(){return this.actions}CheckGameKey(t){return!!this.gameKeys.includes(t)}}},423:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s(587));class h extends a.default{constructor(t,e,s,i,a,h,o,n,r){super(t,e,s,i),this.color=a,this.velocityX=h,this.velocityY=o,this.size=n,this.lifespan=r,this.alpha=1}Update(t){this.x+=this.velocityX*t,this.y+=this.velocityY*t,this.alpha=Math.max(0,this.alpha-t/this.lifespan)}Render(){this.ctx.globalAlpha=this.alpha,this.ctx.fillStyle=this.color,this.ctx.beginPath(),this.ctx.arc(this.x,this.y,this.size,0,2*Math.PI),this.ctx.fill(),this.ctx.globalAlpha=1}GetAlpha(){return this.alpha}}e.default=h},631:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s(587));class h extends a.default{constructor(t,e,s,i,a,h){super(t,e,s,i),this.collisionRadius=a,this.renderCollision=h,this.isColliding=!1}Update(t){}Render(){this.renderCollision&&(this.ctx.beginPath(),this.ctx.strokeStyle=this.isColliding?"red":"yellow",this.ctx.arc(this.x,this.y,this.collisionRadius,0,2*Math.PI),this.ctx.closePath(),this.ctx.stroke())}GetIsColliding(){return this.isColliding}GetCollisionRadius(){return this.collisionRadius}GetRenderCollision(){return this.renderCollision}SetColliding(t){this.isColliding=t}}e.default=h},412:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s(631)),h=s(253);class o extends a.default{constructor(t,e,s,i=1,a,h){const o={1:2.75*(Math.random()+.1),2:3.25*(Math.random()+.15),3:3.75*(Math.random()+.15)};super(t,e,0,0,{1:46,2:22,3:12}[i],s),this.x=a||Math.floor(Math.random()*this.canvasWidth),this.y=h||Math.floor(Math.random()*this.canvasHeight),this.asteroidScores={1:5,2:7,3:9},this.level=i||1,this.angle=Math.floor(328*Math.random()),this.strokeColor="rgb(180,138,113)",this.renderRotation=0,this.shotSoundEffect=e.audioManager.CreateSound("asteroidExplode"),this.speed={1:200,2:240,3:275}[i],this.renderRotationSpeed=o[i],this.radius={1:50,2:25,3:15}[i]}ScoredHit(){if(this.shotSoundEffect.Play(),this.gameManager.AddScore(this.asteroidScores[this.level]),this.gameManager.AddGameObject(new h.Explosion(this.gameCanvas,this.gameManager,this.x,this.y,10,2,["brown"],1)),1===this.level||2===this.level){const t=this.level+1;this.gameManager.AddGameObject(new o(this.gameCanvas,this.gameManager,this.GetRenderCollision(),t,this.x-5,this.y-5)),this.gameManager.AddGameObject(new o(this.gameCanvas,this.gameManager,this.GetRenderCollision(),t,this.x+5,this.y+5))}this.gameManager.audioManager.CleanUp(this.shotSoundEffect),this.gameManager.RemoveGameObject(this)}Update(t){super.Update(t),this.renderRotation+=this.renderRotationSpeed*t;var e=this.angle/Math.PI*180;this.x+=Math.cos(e)*this.speed*t,this.y+=Math.sin(e)*this.speed*t,this.x<this.radius/2&&(this.x=this.canvasWidth),this.x>this.canvasWidth&&(this.x=this.radius),this.y<this.radius/2&&(this.y=this.canvasHeight),this.y>this.canvasHeight&&(this.y=this.radius)}Render(){super.Render(),this.ctx.strokeStyle=this.strokeColor,this.ctx.beginPath();let t=2*Math.PI/6;var e=this.angle/Math.PI*180+this.renderRotation;for(let s=0;s<6;s++)this.ctx.lineTo(this.x-this.radius*Math.cos(t*s+e),this.y-this.radius*Math.sin(t*s+e));this.ctx.closePath(),this.ctx.stroke()}}e.default=o},66:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s(631));class h extends a.default{constructor(t,e,s,i,a,h){super(t,e,s,i,3,a),this.angle=h,this.height=4,this.width=4,this.speed=2e3,this.bulletSoundEffect=e.audioManager.CreateSound("shootBullet"),this.soundPlayed=!1}Remove(){this.gameManager.audioManager.CleanUp(this.bulletSoundEffect),this.gameManager.RemoveGameObject(this)}Update(t){super.Update(t),this.soundPlayed||(this.bulletSoundEffect.Play(),this.soundPlayed=!0);var e=this.angle/Math.PI*180;this.x-=Math.cos(e)*this.speed*t,this.y-=Math.sin(e)*this.speed*t,(this.x<-25||this.y<-25||this.x>this.canvasWidth+25||this.y>this.canvasHeight+25)&&this.Remove()}Render(){super.Render(),this.ctx.fillStyle="pink",this.ctx.fillRect(this.x,this.y,this.width,this.height)}}e.default=h},223:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.LivesCounter=e.ScoreCounter=e.GameMsg=e.DebugHUD=void 0;const a=i(s(57));class h extends a.default{constructor(t,e){super(t,e,0,0),this.x=this.canvasWidth-10,this.y=this.canvasHeight-10,this.font="25px Arial",this.fpsOutput="FPS: ",this.gameState="GameState: "+this.gameManager.GetGameState(),this.asteroidsOutput="Asteroids: "+this.gameManager.GetCurrentAsteroids()}Update(t){this.gameState="GameState: "+this.gameManager.GetGameState(),this.asteroidsOutput="Asteroids: "+this.gameManager.GetCurrentAsteroids(),this.fpsOutput="FPS: "+this.gameManager.GetFps()}Render(){this.ctx.font=this.font,this.ctx.fillStyle=this.color,this.ctx.fillText(this.gameState,this.x-this.ctx.measureText(this.gameState).width,this.y),this.ctx.fillText(this.asteroidsOutput,this.x-this.ctx.measureText(this.asteroidsOutput).width,this.y-30),this.ctx.fillText(this.fpsOutput,this.x-this.ctx.measureText(this.fpsOutput).width,this.y-60)}}e.DebugHUD=h;class o extends a.default{constructor(t,e,s,i,a="white",h="white"){super(t,e,0,0),this.font1="50px Arial",this.font2="20px Arial",this.text1=s||"Foo",this.text2=i||"Bar",this.text1Color=a,this.text2Color=h}Update(t){}Render(){this.ctx.fillStyle=this.text1Color,this.ctx.font=this.font1,this.ctx.fillText(this.text1,(this.canvasWidth-this.ctx.measureText(this.text1).width)/2,this.canvasHeight/2),this.ctx.fillStyle=this.text2Color,this.ctx.font=this.font2,this.ctx.fillText(this.text2,(this.canvasWidth-this.ctx.measureText(this.text2).width)/2,this.canvasHeight/2+40)}}e.GameMsg=o;class n extends a.default{constructor(t,e){super(t,e,0,0),this.score=this.gameManager.GetCurrentScore()}Update(t){this.score=this.gameManager.GetCurrentScore()}Render(){this.ctx.strokeStyle=this.color,this.ctx.fillStyle="white",this.ctx.font="20px Arial",this.ctx.fillText("SCORE: "+this.score.toString(),20,35)}}e.ScoreCounter=n;class r extends a.default{constructor(t,e){super(t,e,1175,10),this.lives=this.gameManager.GetCurrentLives(),this.color="lime"}Update(t){this.lives=this.gameManager.GetCurrentLives()}Render(){let t=[[9,9],[-9,9]],e=this.x;this.ctx.strokeStyle=this.color;for(let s=0;s<this.lives;s++){this.ctx.beginPath(),this.ctx.moveTo(e,this.y);for(let s=0;s<t.length;s++)this.ctx.lineTo(e+t[s][0],this.y+t[s][1]);this.ctx.closePath(),this.ctx.stroke(),e-=30}}}e.LivesCounter=r},828:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s(412)),h=i(s(884)),o=i(s(608)),n=s(536),r=s(295),l=s(223);e.default=class{constructor(t,e){this.gameObjects=[],this.inputManager=new h.default,this.audioManager=new n.AudioManager,this.gameCanvas=t,this.fps=0,this.secondsPassed=0,this.oldTimeStamp=0,this.debugHud=e.debugHud,this.debugShields=e.debugShields,this.easyLevels=e.easyLevels,this.renderCollision=e.renderCollision,this.gameState="START",this.currentLevel=1,this.currentLives=0,this.currentScore=0,this.currentAsteroids=0,this.bonusLivesScore=25,this.gameOverSound=this.audioManager.CreateSound("gameOver"),this.missionCompleteSound=this.audioManager.CreateSound("missionComplete"),this.levelData={1:{bigAsteroids:6,mediumAsteroids:0,smallAsteroids:0},2:{bigAsteroids:7,mediumAsteroids:2,smallAsteroids:0},3:{bigAsteroids:8,mediumAsteroids:4,smallAsteroids:3},4:{bigAsteroids:9,mediumAsteroids:6,smallAsteroids:6},5:{bigAsteroids:10,mediumAsteroids:8,smallAsteroids:9}},this.easyLevels&&(this.levelData={1:{bigAsteroids:1,mediumAsteroids:1,smallAsteroids:1},2:{bigAsteroids:1,mediumAsteroids:1,smallAsteroids:2}}),this.player=void 0,this.playerRespawnTime=2}Init(){this.gameCanvas.ClearScreen(),this.debugHud&&this.AddGameObject(new l.DebugHUD(this.gameCanvas,this)),this.AddGameObject(new l.LivesCounter(this.gameCanvas,this)),this.AddGameObject(new l.ScoreCounter(this.gameCanvas,this)),this.AddGameObject(new l.GameMsg(this.gameCanvas,this,"Asteroids","Press Enter To Start")),this.SpawnAsteroids(6,1),this.SpawnAsteroids(3,2),this.SpawnAsteroids(2,3)}DoGameLoop(t){"GAME_OVER"===this.gameState&&console.log("Game is in GAME_OVER state. Checking update logic."),this.secondsPassed=(t-this.oldTimeStamp)/1e3,this.oldTimeStamp=t,this.fps=Math.round(1/this.secondsPassed),this.gameCanvas.ClearScreen();for(let t=0;t<this.gameObjects.length;t++)this.gameObjects[t].Update(this.secondsPassed);(0,r.detectCollisions)(this.gameObjects),this.CheckGameState();for(let t=0;t<this.gameObjects.length;t++)this.gameObjects[t].Render()}AddGameObject(t){this.gameObjects.push(t)}RemoveGameObject(t){const e=this.gameObjects.indexOf(t);this.gameObjects.splice(e,1)}RemoveGameObjectTypes(t){this.gameObjects=this.gameObjects.filter((e=>!(e instanceof t)))}CheckGameState(){const t=this.inputManager.GetCurrentActions();switch(this.gameState){case"START":case"GAME_OVER":t.startButton&&(this.RemoveGameObjectTypes(l.GameMsg),this.NewGame());break;case"LEVEL_SETUP":break;case"LEVEL_RUNNING":if(this.TrackAsteroids(),0==this.currentAsteroids){if(this.currentLevel==Object.keys(this.levelData).length)return this.MissionComplete();this.LevelComplete()}break;case"LEVEL_COMPLETE":t.startButton&&(this.RemoveGameObjectTypes(l.GameMsg),this.NextLevel());break;default:console.log("GameState Error.")}}GetGameState(){return this.gameState}GetCurrentAsteroids(){return this.currentAsteroids}GetCurrentScore(){return this.currentScore}GetCurrentLives(){return this.currentLives}GetFps(){return this.fps}GetIsSoundEnabled(){return this.audioManager.CheckAudioEnabled()}NewGame(){this.gameState="LEVEL_SETUP",this.currentLevel=1,this.currentScore=0,this.LevelSetup()}LevelComplete(){this.gameState="LEVEL_COMPLETE",this.player&&this.player.CleanUpEffects(),this.RemoveGameObjectTypes(o.default),this.AddScore(this.currentLives*this.bonusLivesScore),this.AddGameObject(new l.GameMsg(this.gameCanvas,this,`LEVEL ${this.currentLevel} COMPLETE`,"Press Enter To Continue."))}NextLevel(){this.gameState="LEVEL_SETUP",this.currentLevel+=1,this.LevelSetup()}GameOver(){this.gameState="GAME_OVER",this.AddGameObject(new l.GameMsg(this.gameCanvas,this,"GAME OVER","Press Enter To Try Again","red")),this.gameOverSound.Play()}MissionComplete(){return this.player&&this.player.CleanUpEffects(),this.RemoveGameObjectTypes(o.default),this.gameState="GAME_OVER",this.missionCompleteSound.Play(),this.AddGameObject(new l.GameMsg(this.gameCanvas,this,"MISSION COMPLETE","Press Enter To Play Again","lime"))}AddScore(t){this.currentScore+=t}ResolveShipHit(){if(this.currentLives-=1,this.DestroyShip(),this.currentLives<=0)return this.GameOver();this.NewShip()}LevelSetup(){this.RemoveGameObjectTypes(a.default),this.RemoveGameObjectTypes(o.default),this.currentLives=3,this.currentAsteroids=0;const t=this.levelData[this.currentLevel];this.SpawnAsteroids(t.bigAsteroids,1),this.SpawnAsteroids(t.mediumAsteroids,2),this.SpawnAsteroids(t.smallAsteroids,3),this.NewShip(0),this.gameState="LEVEL_RUNNING"}SpawnAsteroids(t,e=1){for(let s=0;s<t;s++)this.AddGameObject(new a.default(this.gameCanvas,this,this.renderCollision,e))}TrackAsteroids(){let t=0;for(let e=0;e<this.gameObjects.length;e++)this.gameObjects[e]instanceof a.default&&(t+=1);this.currentAsteroids=t}NewShip(t=this.playerRespawnTime){this.player=new o.default(this.gameCanvas,this,this.renderCollision,t,this.debugShields),this.AddGameObject(this.player)}DestroyShip(){var t;null===(t=this.player)||void 0===t||t.ShipExplodes(),this.RemoveGameObjectTypes(o.default)}}},253:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.JetEmitter=e.ShipExplosion=e.Explosion=void 0;const a=i(s(587)),h=i(s(423));class o extends a.default{constructor(t,e,s,i,a=10,o=1,n=["white"],r){super(t,e,s,i),this.particles=[],this.colors=n,this.particleCount=a,this.particleSize=o,this.particleLifespan=r;for(let t=0;t<this.particleCount;t++){const t=2*Math.random()*Math.PI,e=500*Math.random()+100,s=e*Math.cos(t),a=e*Math.sin(t),o=this.colors[Math.floor(Math.random()*this.colors.length)],n=new h.default(this.gameCanvas,this.gameManager,this.x,i,o,s,a,this.particleSize,this.particleLifespan);this.particles.push(n)}console.log("Constructor called for Explosion.")}Update(t){console.log("Update method called for Explosion.");for(const e of this.particles)e.Update(t);this.particles=this.particles.filter((t=>t.GetAlpha()>0)),0==this.particles.length&&this.gameManager.RemoveGameObject(this)}Render(){for(const t of this.particles)t.Render()}}e.Explosion=o,e.ShipExplosion=class extends o{constructor(t,e,s,i){super(t,e,s,i,50,1.5,["white","white","white","white","red","pink","rgba(0, 255, 255, 1)"],2)}};class n extends a.default{constructor(t,e,s,i){super(t,e,s,i),this.particles=[],this.shouldEmit=!1,this.particlesPerSec=255,this.particleSize=2,this.particleColor="orange",this.particleLifespan=.1,this.particleSpeedMultiplier=.25,this.velX=0,this.velY=0}StartEmitting(){this.shouldEmit=!0}StopEmitting(){this.shouldEmit=!1}SetLocation(t,e,s,i){this.x=t,this.y=e,this.velX=s,this.velY=i}Update(t){if(this.shouldEmit){const e=Math.floor(this.particlesPerSec*t);for(let t=0;t<e;t++){const t=new h.default(this.gameCanvas,this.gameManager,this.x,this.y,this.particleColor,this.velX*this.particleSpeedMultiplier,this.velY*this.particleSpeedMultiplier,this.particleSize,this.particleLifespan);this.particles.push(t)}}for(const e of this.particles)e.Update(t);this.particles=this.particles.filter((t=>t.GetAlpha()>0))}Render(){for(const t of this.particles)t.Render()}}e.JetEmitter=n},608:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s(66)),h=i(s(631)),o=s(253);class n extends h.default{constructor(t,e,s,i=0,a=!1){super(t,e,0,0,11,s),this.x=this.canvasWidth/2,this.y=this.canvasHeight/2,this.radius=15,this.speed=10,this.velocityX=0,this.velocityY=0,this.rotateSpeed=.1,this.debugShields=a,this.shieldTimer=2,this.bulletTimer=0,this.bulletFireDelay=.2,this.shieldSoundEffect=this.gameManager.audioManager.CreateSound("shieldDown"),this.shipExplodeSoundEffect=this.gameManager.audioManager.CreateSound("shipExplode"),this.shipRespawnSoundEffect=this.gameManager.audioManager.CreateSound("shipRespawn"),this.thrusterSoundEffect=this.gameManager.audioManager.CreateSound("shipThrusters",!0),this.strokeColor="white",this.noseX=this.x+15,this.noseY=this.y,this.angle=Math.random(),this.dirModifier=0,this.respawnTimer=i,this.hasRespawned=!1,this.movingForward=!1,this.wasMovingForward=!1,this.jetX=this.x,this.jetY=this.y,this.jetEmitter=new o.JetEmitter(this.gameCanvas,this.gameManager,this.jetX,this.jetY),this.gameManager.AddGameObject(this.jetEmitter)}Update(t){if(this.respawnTimer=Math.max(0,this.respawnTimer-t),this.respawnTimer>0)return;if(this.hasRespawned||(this.shipRespawnSoundEffect.Play(),this.hasRespawned=!0),super.Update(t),this.debugShields&&(this.shieldTimer=5),1==this.GetIsColliding()&&0==this.shieldTimer)return this.ShipWasHit();this.bulletTimer+=t;const e=this.gameManager.inputManager.GetCurrentActions();this.wasMovingForward=this.movingForward,this.movingForward=e.forwardButton,this.dirModifier=0,e.leftButton&&(this.dirModifier=-1),e.rightButton&&(this.dirModifier=1),e.fireButton&&this.bulletTimer>=this.bulletFireDelay&&(this.gameManager.AddGameObject(new a.default(this.gameCanvas,this.gameManager,this.noseX,this.noseY,this.GetRenderCollision(),this.angle)),this.bulletTimer=0);let s=this.angle/Math.PI*180;this.movingForward&&(this.velocityX+=Math.cos(s)*this.speed,this.velocityY+=Math.sin(s)*this.speed),this.wasMovingForward!==this.movingForward&&(this.movingForward&&(this.thrusterSoundEffect.Play(),this.jetEmitter.StartEmitting()),this.movingForward||(this.thrusterSoundEffect.Stop(),this.jetEmitter.StopEmitting())),this.x<this.radius&&(this.x=this.canvasWidth),this.x>this.canvasWidth&&(this.x=this.radius),this.y<this.radius&&(this.y=this.canvasHeight),this.y>this.canvasHeight&&(this.y=this.radius),this.velocityX*=Math.pow(.5,t),this.velocityY*=Math.pow(.5,t),this.angle+=this.rotateSpeed*this.dirModifier*t,this.x-=this.velocityX*t,this.y-=this.velocityY*t,this.jetX=this.x+this.radius/2*Math.cos(s),this.jetY=this.y+this.radius/2*Math.sin(s),this.jetEmitter.SetLocation(this.jetX,this.jetY,this.velocityX,this.velocityY);let i=this.shieldTimer;this.shieldTimer=Math.max(0,this.shieldTimer-t),i>this.shieldTimer&&0===this.shieldTimer&&this.shieldSoundEffect.Play()}Render(){if(this.respawnTimer>0)return;super.Render();let t=2*Math.PI/3,e=this.angle/Math.PI*180;this.ctx.strokeStyle=this.strokeColor,this.ctx.beginPath();for(let s=0;s<3;s++)this.ctx.lineTo(this.x-this.radius*Math.cos(t*s+e),this.y-this.radius*Math.sin(t*s+e));if(this.ctx.closePath(),this.ctx.stroke(),this.noseX=this.x-this.radius*Math.cos(e),this.noseY=this.y-this.radius*Math.sin(e),this.ctx.strokeStyle="red",this.ctx.beginPath(),this.ctx.arc(this.noseX,this.noseY,1.5,0,2*Math.PI),this.ctx.closePath(),this.ctx.stroke(),this.shieldTimer>0){let t=this.shieldTimer>1?.9:this.shieldTimer;this.ctx.beginPath(),this.ctx.strokeStyle=`rgba(0, 255, 255, ${t})`,this.ctx.arc(this.x,this.y,1.75*this.GetCollisionRadius(),0,2*Math.PI),this.ctx.closePath(),this.ctx.stroke()}}ShipWasHit(){this.gameManager.ResolveShipHit()}ShipExplodes(){this.shipExplodeSoundEffect.Play(),this.gameManager.AddGameObject(new o.ShipExplosion(this.gameCanvas,this.gameManager,this.x,this.y)),this.CleanUpEffects()}CleanUpEffects(){this.thrusterSoundEffect.Stop(),this.gameManager.audioManager.CleanUp(this.shipExplodeSoundEffect),this.gameManager.audioManager.CleanUp(this.thrusterSoundEffect),this.gameManager.RemoveGameObject(this.jetEmitter)}}e.default=n},519:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s(532)),h=i(s(828)),o={debugHud:!1,debugShields:!1,easyLevels:!1,renderCollision:!1};let n;function r(t){n.DoGameLoop(t),window.requestAnimationFrame(r)}document.addEventListener("DOMContentLoaded",(function(){const t="my-canvas",e=document.getElementById(t),s=document.getElementById("controls"),i=document.getElementById("no-game"),l=!(navigator.maxTouchPoints>1&&!confirm("A keyboard is required to play this game on your device.\nDo you want to still load the game?"));if(l){if(!(e instanceof HTMLCanvasElement))throw new Error(`Unable to find canvas with ${t}`);s&&(s.style.display="block"),e&&(e.style.display="block"),i&&(i.style.display="none");const l=new a.default(e);n=new h.default(l,o),n.Init(),window.requestAnimationFrame(r)}l||(s&&(s.style.display="none"),e&&(e.style.display="none"),i&&(i.style.display="block"))}))}},e={};!function s(i){var a=e[i];if(void 0!==a)return a.exports;var h=e[i]={exports:{}};return t[i].call(h.exports,h,h.exports,s),h.exports}(519)})();