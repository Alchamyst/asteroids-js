(()=>{"use strict";var t={536:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Sound=e.AudioManager=void 0,e.AudioManager=class{constructor(){this.audioPlayers=[],this.isAudioEnabled=!0}CheckAudioEnabled(){return this.isAudioEnabled}ToggleAudioEnabled(t=!this.isAudioEnabled){this.isAudioEnabled=t}CreateSound(t,e=!1){const i=new s(this,t,e);return this.audioPlayers.push(i),i}CleanUp(t){if(t instanceof s){t.Remove();const e=this.audioPlayers.indexOf(t);-1!==e&&this.audioPlayers.splice(e,1)}else console.log("CleanUp Failed: Not an instanceof Sound.")}};class s{constructor(t,e,s=!1){this.audioManager=t;const i={asteroidExplode:{soundFile:"./audio/space-explosion-with-reverb-101449.mp3",volPercent:40},gameOver:{soundFile:"./audio/game-fx-9-40197.mp3",volPercent:50},missionComplete:{soundFile:"./audio/game-level-complete-143022.mp3",volPercent:50},shieldDown:{soundFile:"./audio/one_beep-99630.mp3",volPercent:100},shipExplode:{soundFile:"./audio/heavy-cineamtic-hit-166888.mp3",volPercent:25},shipRespawn:{soundFile:"./audio/robot_01-47250.mp3",volPercent:50},shipThrusters:{soundFile:"./audio/thrusters_loopwav-14699.mp3",volPercent:100},shootBullet:{soundFile:"./audio/shoot02wav-14562.mp3",volPercent:10}};this.sound=new Audio(i[e].soundFile),this.sound.setAttribute("preload","auto"),this.sound.setAttribute("controls","none"),this.sound.style.display="none",document.body.appendChild(this.sound),this.SetVolume(i[e].volPercent),this.sound.loop=s}SetVolume(t){if(!(t>=0&&t<=100))return console.error("Invalid volume percentage. Please provide a value between 0 and 100.");this.sound.volume=t/100}Play(){if(this.audioManager.CheckAudioEnabled())try{this.sound.play()}catch(t){console.error(`Error playing sound: ${t}`)}}Stop(){this.sound.pause()}Remove(){try{this.sound&&this.sound.addEventListener("ended",(()=>{this.sound&&this.sound.parentNode&&this.sound.parentNode.removeChild(this.sound)}))}catch(t){console.error(`Error removing sound: ${t}`)}}}e.Sound=s},587:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t,e,s){this.ctx=t,this.x=e,this.y=s}Update(t){}Render(){}}},884:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(){this.actions={leftButton:!1,rightButton:!1,forwardButton:!1,fireButton:!1,startButton:!1},document.body.addEventListener("keydown",(t=>{this.KeyDown(t.keyCode)})),document.body.addEventListener("keyup",(t=>{this.KeyUp(t.keyCode)}))}KeyDown(t){38!==t&&87!=t||(this.actions.forwardButton=!0),37!==t&&65!=t||(this.actions.leftButton=!0),39!==t&&68!=t||(this.actions.rightButton=!0),32===t&&(this.actions.fireButton=!0),13===t&&(this.actions.startButton=!0)}KeyUp(t){38!==t&&87!==t||(this.actions.forwardButton=!1),37!==t&&65!==t||(this.actions.leftButton=!1),39!==t&&68!==t||(this.actions.rightButton=!1),32===t&&(this.actions.fireButton=!1),13===t&&(this.actions.startButton=!1)}GetCurrentActions(){return this.actions}}},631:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=i(s(587));class r extends o.default{constructor(t,e,s,i,o){super(t,e,s),this.collisionRadius=i,this.renderCollision=o,this.isColliding=!1}Update(t){}Render(){this.renderCollision&&(this.ctx.beginPath(),this.ctx.strokeStyle=this.isColliding?"red":"yellow",this.ctx.arc(this.x,this.y,this.collisionRadius,0,2*Math.PI),this.ctx.closePath(),this.ctx.stroke())}GetCollisionStatus(){return this.isColliding}GetCollisionRadius(){return this.collisionRadius}SetColliding(t){this.isColliding=t}}e.default=r},519:function(t,e,s){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=i(s(587)),r=i(s(631)),h=i(s(884)),n=s(536),a=!1,l=1200,d=800;let u,c,p,f,m=0,S=0,v=[];function g(){c.fillStyle="black",c.fillRect(0,0,l,d)}function y(t){m=(t-S)/1e3,S=t,p=Math.round(1/m),g();for(let t=0;t<v.length;t++)v[t].Update(m);E(),f.CheckGameState();for(let t=0;t<v.length;t++)v[t].Render();window.requestAnimationFrame(y)}document.addEventListener("DOMContentLoaded",(function(){u=document.getElementById("my-canvas"),c=u.getContext("2d"),u.width=l,u.height=d,g(),f=new M,f.Init(),window.requestAnimationFrame(y)}));const E=()=>{let t,e;for(let t=0;t<v.length;t++){const e=v[t];e instanceof r.default&&e.SetColliding(!1)}for(let l=v.length-1;l>=0;l--)if(t=v[l],t instanceof r.default)for(let d=v.length-1;d>=0;d--)if(e=v[d],e instanceof r.default&&l!==d&&(s=t.x,i=t.y,o=t.GetCollisionRadius(),h=e.x,n=e.y,a=e.GetCollisionRadius(),(s-h)*(s-h)+(i-n)*(i-n)<=(o+a)*(o+a))){if((t instanceof L||e instanceof L)&&(t instanceof b||e instanceof b))return;t.SetColliding(!0),e.SetColliding(!0),(t instanceof L||e instanceof L)&&(t instanceof R||e instanceof R)&&(t instanceof R&&e instanceof L&&(e.Remove(),t.ScoredHit()),e instanceof R&&t instanceof L&&(t.Remove(),e.ScoredHit()))}var s,i,o,h,n,a};function w(t){v=v.filter((e=>!(e instanceof t)))}class M{constructor(){this.inputManager=new h.default,this.audioManager=new n.AudioManager,this.gameState="START",this.currentLevel=1,this.currentLives=0,this.currentScore=0,this.currentAsteroids=0,this.bonusLivesScore=25,this.isSoundEnabled=this.audioManager.CheckAudioEnabled(),this.gameOverSound=this.audioManager.CreateSound("gameOver"),this.missionCompleteSound=this.audioManager.CreateSound("missionComplete"),this.levelData={1:{bigAsteroids:6,mediumAsteroids:0,smallAsteroids:0},2:{bigAsteroids:7,mediumAsteroids:2,smallAsteroids:0},3:{bigAsteroids:8,mediumAsteroids:4,smallAsteroids:3},4:{bigAsteroids:9,mediumAsteroids:6,smallAsteroids:6},5:{bigAsteroids:10,mediumAsteroids:8,smallAsteroids:9}},this.player=void 0,this.playerRespawnTime=2}Init(){v.push(new P),v.push(new A),v.push(new C("Asteroids","Press Enter To Start")),this.SpawnAsteroids(10)}CheckGameState(){const t=this.inputManager.GetCurrentActions();switch(this.gameState){case"START":case"GAME_OVER":t.startButton&&(w(C),this.NewGame());break;case"LEVEL_SETUP":break;case"LEVEL_RUNNING":if(this.TrackAsteroids(),0==this.currentAsteroids){if(this.currentLevel==Object.keys(this.levelData).length)return this.GameOver();this.LevelComplete()}break;case"LEVEL_COMPLETE":t.startButton&&(w(C),this.NextLevel());break;default:console.log("GameState Error.")}}GetGameState(){return this.gameState}GetCurrentAsteroids(){return this.currentAsteroids}GetCurrentScore(){return this.currentScore}GetCurrentLives(){return this.currentLives}IsSoundEnabled(){return this.isSoundEnabled}NewGame(){this.gameState="LEVEL_SETUP",this.currentLevel=1,this.currentScore=0,this.LevelSetup()}LevelComplete(){this.gameState="LEVEL_COMPLETE",this.player&&this.player.CleanUpEffects(),w(b),this.AddScore(this.currentLives*this.bonusLivesScore),v.push(new C(`LEVEL ${this.currentLevel} COMPLETE`,"Press Enter To Continue."))}NextLevel(){this.gameState="LEVEL_SETUP",this.currentLevel+=1,this.LevelSetup()}GameOver(){if(this.player&&this.player.CleanUpEffects(),w(b),this.currentLevel==Object.keys(this.levelData).length)return this.gameState="GAME_OVER",this.missionCompleteSound.Play(),v.push(new C("MISSION COMPLETE","Press Enter To Play Again","lime"));this.gameState="GAME_OVER",v.push(new C("GAME OVER","Press Enter To Try Again","red")),this.gameOverSound.Play()}AddScore(t){this.currentScore+=t}ShipDestroyed(){if(this.currentLives-=1,this.currentLives<=0)return this.GameOver();w(b),this.NewShip()}LevelSetup(){w(R),w(b),this.currentLives=3,this.currentAsteroids=0;const t=this.levelData[this.currentLevel];this.SpawnAsteroids(t.bigAsteroids,1),this.SpawnAsteroids(t.mediumAsteroids,2),this.SpawnAsteroids(t.smallAsteroids,3),this.NewShip(0),this.gameState="LEVEL_RUNNING"}SpawnAsteroids(t,e=1){for(let s=0;s<t;s++)v.push(new R(e))}TrackAsteroids(){let t=0;for(let e=0;e<v.length;e++)v[e]instanceof R&&(t+=1);this.currentAsteroids=t}NewShip(t=this.playerRespawnTime){this.player=new b(t),v.push(this.player)}}class x extends o.default{constructor(t,e){super(c,t,e),this.color="white"}}class C extends x{constructor(t,e,s="white",i="white"){super(0,0),this.font1="50px Arial",this.font2="20px Arial",this.text1=t||"Foo",this.text2=e||"Bar",this.text1Color=s,this.text2Color=i}Update(t){}Render(){c.fillStyle=this.text1Color,c.font=this.font1,c.fillText(this.text1,(l-c.measureText(this.text1).width)/2,d/2),c.fillStyle=this.text2Color,c.font=this.font2,c.fillText(this.text2,(l-c.measureText(this.text2).width)/2,d/2+40)}}class A extends x{constructor(){super(0,0),this.score=f.GetCurrentScore()}Update(t){this.score=f.GetCurrentScore()}Render(){c.strokeStyle=this.color,c.fillStyle="white",c.font="20px Arial",c.fillText("SCORE: "+this.score.toString(),20,35)}}class P extends x{constructor(){super(1175,10),this.lives=f.GetCurrentLives(),this.color="lime"}Update(t){this.lives=f.GetCurrentLives()}Render(){let t=[[9,9],[-9,9]],e=this.x;c.strokeStyle=this.color;for(let s=0;s<this.lives;s++){c.beginPath(),c.moveTo(e,this.y);for(let s=0;s<t.length;s++)c.lineTo(e+t[s][0],this.y+t[s][1]);c.closePath(),c.stroke(),e-=30}}}class b extends r.default{constructor(t=0){const e=l/2,s=d/2;super(c,e,s,11,a),this.radius=15,this.speed=10,this.velocityX=0,this.velocityY=0,this.rotateSpeed=.1,this.shieldTimer=2,this.bulletTimer=0,this.bulletFireDelay=.2,this.shieldSoundEffect=f.audioManager.CreateSound("shieldDown"),this.shipExplodeSoundEffect=f.audioManager.CreateSound("shipExplode"),this.shipRespawnSoundEffect=f.audioManager.CreateSound("shipRespawn"),this.thrusterSoundEffect=f.audioManager.CreateSound("shipThrusters",!0),this.strokeColor="white",this.noseX=e+15,this.noseY=s,this.angle=Math.random(),this.dirModifier=0,this.respawnTimer=t,this.hasRespawned=!1,this.movingForward=!1,this.wasMovingForward=!1,this.jetX=this.x,this.jetY=this.y,this.jetEmitter=new k(this.jetX,this.jetY),v.push(this.jetEmitter)}Update(t){if(this.respawnTimer=Math.max(0,this.respawnTimer-t),this.respawnTimer>0)return;if(this.hasRespawned||(this.shipRespawnSoundEffect.Play(),this.hasRespawned=!0),super.Update(t),1==this.GetCollisionStatus()&&0==this.shieldTimer)return this.ShipWasHit();this.bulletTimer+=t;const e=f.inputManager.GetCurrentActions();this.wasMovingForward=this.movingForward,this.movingForward=e.forwardButton,this.dirModifier=0,e.leftButton&&(this.dirModifier=-1),e.rightButton&&(this.dirModifier=1),e.fireButton&&this.bulletTimer>=this.bulletFireDelay&&(v.push(new L(this.noseX,this.noseY,this.angle)),this.bulletTimer=0);let s=this.angle/Math.PI*180;this.movingForward&&(this.velocityX+=Math.cos(s)*this.speed,this.velocityY+=Math.sin(s)*this.speed),this.wasMovingForward!==this.movingForward&&(this.movingForward&&(this.thrusterSoundEffect.Play(),this.jetEmitter.StartEmitting()),this.movingForward||(this.thrusterSoundEffect.Stop(),this.jetEmitter.StopEmitting())),this.x<this.radius&&(this.x=u.width),this.x>u.width&&(this.x=this.radius),this.y<this.radius&&(this.y=u.height),this.y>u.height&&(this.y=this.radius),this.velocityX*=Math.pow(.5,t),this.velocityY*=Math.pow(.5,t),this.angle+=this.rotateSpeed*this.dirModifier*t,this.x-=this.velocityX*t,this.y-=this.velocityY*t,this.jetX=this.x+this.radius/2*Math.cos(s),this.jetY=this.y+this.radius/2*Math.sin(s),this.jetEmitter.SetLocation(this.jetX,this.jetY,this.velocityX,this.velocityY);let i=this.shieldTimer;this.shieldTimer=Math.max(0,this.shieldTimer-t),i>this.shieldTimer&&0===this.shieldTimer&&this.shieldSoundEffect.Play()}Render(){if(this.respawnTimer>0)return;super.Render();let t=2*Math.PI/3,e=this.angle/Math.PI*180;c.strokeStyle=this.strokeColor,c.beginPath();for(let s=0;s<3;s++)c.lineTo(this.x-this.radius*Math.cos(t*s+e),this.y-this.radius*Math.sin(t*s+e));if(c.closePath(),c.stroke(),this.noseX=this.x-this.radius*Math.cos(e),this.noseY=this.y-this.radius*Math.sin(e),c.strokeStyle="red",c.beginPath(),c.arc(this.noseX,this.noseY,1.5,0,2*Math.PI),c.closePath(),c.stroke(),this.shieldTimer>0){let t=this.shieldTimer>1?.9:this.shieldTimer;c.beginPath(),c.strokeStyle=`rgba(0, 255, 255, ${t})`,c.arc(this.x,this.y,1.75*this.GetCollisionRadius(),0,2*Math.PI),c.closePath(),c.stroke()}}ShipWasHit(){this.shipExplodeSoundEffect.Play(),v.push(new U(this.x,this.y)),this.CleanUpEffects(),f.ShipDestroyed()}CleanUpEffects(){this.thrusterSoundEffect.Stop(),f.audioManager.CleanUp(this.shipExplodeSoundEffect),f.audioManager.CleanUp(this.thrusterSoundEffect),this.jetEmitter.Destroy()}}class L extends r.default{constructor(t,e,s){super(c,t,e,3,a),this.angle=s,this.height=4,this.width=4,this.speed=2e3,this.bulletSoundEffect=f.audioManager.CreateSound("shootBullet"),this.soundPlayed=!1}Remove(){f.audioManager.CleanUp(this.bulletSoundEffect);var t=v.indexOf(this);return v.splice(t,1)}Update(t){super.Update(t),this.soundPlayed||(this.bulletSoundEffect.Play(),this.soundPlayed=!0);var e=this.angle/Math.PI*180;this.x-=Math.cos(e)*this.speed*t,this.y-=Math.sin(e)*this.speed*t,(this.x<-25||this.y<-25||this.x>u.width+25||this.y>u.height+25)&&this.Remove()}Render(){super.Render(),c.fillStyle="pink",c.fillRect(this.x,this.y,this.width,this.height)}}class R extends r.default{constructor(t=1,e,s){const i={1:2.75*Math.random(),2:3.25*Math.random(),3:3.75*Math.random()},o=e||Math.floor(Math.random()*l),r=s||Math.floor(Math.random()*d);super(c,o,r,{1:46,2:22,3:12}[t],a),this.asteroidScores={1:5,2:7,3:9},this.level=t||1,this.angle=Math.floor(328*Math.random()),this.strokeColor="rgb(180,138,113)",this.renderRotation=0,this.shotSoundEffect=f.audioManager.CreateSound("asteroidExplode"),this.speed={1:200,2:240,3:275}[t],this.renderRotationSpeed=i[t],this.radius={1:50,2:25,3:15}[t]}ScoredHit(){if(this.shotSoundEffect.Play(),f.AddScore(this.asteroidScores[this.level]),v.push(new G(this.x,this.y,10,2,["brown"],1)),1===this.level||2===this.level){const t=this.level+1;v.push(new R(t,this.x-5,this.y-5)),v.push(new R(t,this.x+5,this.y+5))}f.audioManager.CleanUp(this.shotSoundEffect);var t=v.indexOf(this);return v.splice(t,1)}Update(t){super.Update(t),this.renderRotation+=this.renderRotationSpeed*t;var e=this.angle/Math.PI*180;this.x+=Math.cos(e)*this.speed*t,this.y+=Math.sin(e)*this.speed*t,this.x<this.radius/2&&(this.x=u.width),this.x>u.width&&(this.x=this.radius),this.y<this.radius/2&&(this.y=u.height),this.y>u.height&&(this.y=this.radius)}Render(){super.Render(),c.strokeStyle=this.strokeColor,c.beginPath();let t=2*Math.PI/6;var e=this.angle/Math.PI*180+this.renderRotation;for(let s=0;s<6;s++)c.lineTo(this.x-this.radius*Math.cos(t*s+e),this.y-this.radius*Math.sin(t*s+e));c.closePath(),c.stroke()}}class T extends o.default{constructor(t,e,s,i,o,r,h){super(c,t,e),this.color=s,this.velocityX=i,this.velocityY=o,this.size=r,this.lifespan=h,this.alpha=1}Update(t){this.x+=this.velocityX*t,this.y+=this.velocityY*t,this.alpha=Math.max(0,this.alpha-t/this.lifespan)}Render(){c.globalAlpha=this.alpha,c.fillStyle=this.color,c.beginPath(),c.arc(this.x,this.y,this.size,0,2*Math.PI),c.fill(),c.globalAlpha=1}GetAlpha(){return this.alpha}}class k extends o.default{constructor(t,e){super(c,t,e),this.particles=[],this.shouldEmit=!1,this.particlesPerSec=255,this.particleSize=2,this.particleColor="orange",this.particleLifespan=.1,this.particleSpeedMultiplier=.25,this.velX=0,this.velY=0}StartEmitting(){this.shouldEmit=!0}StopEmitting(){this.shouldEmit=!1}SetLocation(t,e,s,i){this.x=t,this.y=e,this.velX=s,this.velY=i}Update(t){if(this.shouldEmit){const e=Math.floor(this.particlesPerSec*t);for(let t=0;t<e;t++){const t=this.velX,e=this.velY,s=new T(this.x,this.y,this.particleColor,t*this.particleSpeedMultiplier,e*this.particleSpeedMultiplier,this.particleSize,this.particleLifespan);this.particles.push(s)}}for(const e of this.particles)e.Update(t);this.particles=this.particles.filter((t=>t.GetAlpha()>0))}Render(){for(const t of this.particles)t.Render()}Destroy(){w(k)}}class G extends o.default{constructor(t,e,s=10,i=1,o=["white"],r){super(c,t,e),this.particles=[],this.colors=o,this.particleCount=s,this.particleSize=i,this.particleLifespan=r;for(let t=0;t<this.particleCount;t++){const t=2*Math.random()*Math.PI,s=500*Math.random()+100,i=s*Math.cos(t),o=s*Math.sin(t),r=this.colors[Math.floor(Math.random()*this.colors.length)],h=new T(this.x,e,r,i,o,this.particleSize,this.particleLifespan);this.particles.push(h)}}Update(t){for(const e of this.particles)e.Update(t);if(this.particles=this.particles.filter((t=>t.GetAlpha()>0)),0==this.particles.length){const t=v.indexOf(this);return v.splice(t,1)}}Render(){for(const t of this.particles)t.Render()}}class U extends G{constructor(t,e){super(t,e,50,1.5,["white","white","white","white","red","pink","rgba(0, 255, 255, 1)"],2)}}}},e={};!function s(i){var o=e[i];if(void 0!==o)return o.exports;var r=e[i]={exports:{}};return t[i].call(r.exports,r,r.exports,s),r.exports}(519)})();